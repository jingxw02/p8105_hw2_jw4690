---
title: "p8105_hw2_jw4690"
author: "Jingxi Wang"
date: "2024-09-26"
output: github_document
---

```{r setup, echo = FALSE, message = FALSE}
library(tidyverse)
library(readxl)
```

## Problem 1

```{r}
NYCSubway_df = 
  read_csv("./data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv") |>
  janitor::clean_names() |>
  select(line, station_name, station_latitude, station_longitude, route1, route2, route3, route4,
         route5, route6, route7, route8, route9, route10, route11, entry, vending, entrance_type, ada) |>
  mutate(entry = ifelse(entry == "YES", TRUE, FALSE))
```

The dataset details NYC subway entrances and exits, including the line, station name, station latitude, station longitude, routes, entrance type, entry, vending, and ADA. Cleaning steps included clean names, selecting needed variables, and converting entry from "YES"/"NO" to TRUE/FALSE. The cleaned dataset has `r nrow(NYCSubway_df)` of rows and  `r ncol(NYCSubway_df)` columns. The data is tidy, with each row representing a unique entrance/exit and each column a distinct variable.

```{r}
distinct_stations = NYCSubway_df |>
  distinct(line, station_name)
```

There are `r nrow(distinct_stations)` distinct stations.

```{r}
ADA_compliant = NYCSubway_df |>
  filter(ada == "TRUE") |>
  distinct(line, station_name)
```

There are `r nrow(ADA_compliant)` stations are ADA compliant.

```{r}
without_vending = NYCSubway_df |>
  filter(vending == "NO")
```

The proportion of station entrances / exits without vending allow entrance is `r mean(as.numeric(pull(without_vending, var = entry, name = NULL)))`.

```{r}
NYCSubway_df = NYCSubway_df |>
  mutate(across(route1:route11, as.character))

routes = NYCSubway_df |>
  pivot_longer(cols = route1:route11,
               names_to = "route_number",
               values_to = "route_name") |>
  filter(!is.na(route_name))
```

```{r}
A_train = routes |>
  filter(route_name == "A") |>
  distinct(line, station_name)
```

`r nrow(A_train)` distinct stations serve the A train.

```{r}
A_train_ADA = routes |>
  filter(route_name == "A", ada == "TRUE") |>
  distinct(line, station_name)
```

Of the stations that serve the A train, `r nrow(A_train_ADA)` are ADA compliant.

## Problem 2

```{r}
TrashWheel_df = 
  read_excel("data/202309 Trash Wheel Collection Data.xlsx", sheet = 1) |>
  janitor::clean_names() |>
  select_if(~ !all(is.na(.))) |>
  filter(!is.na(dumpster)) |>
  mutate(sports_balls = as.integer(round(sports_balls)))
```

```{r}
Professor_Trash_Wheel = 
  read_excel("data/202309 Trash Wheel Collection Data.xlsx", sheet = 2) |>
  janitor::clean_names() |>
  filter(!is.na(dumpster))
```


```{r}
Gwynnda_df = 
  read_excel("data/202309 Trash Wheel Collection Data.xlsx", sheet = 4) |>
  janitor::clean_names() |>
  filter(!is.na(dumpster))
```


